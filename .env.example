# ====================================
# EMPLOYEE TRADING APPROVAL PORTAL
# Environment Configuration Template
# ====================================
# Copy this file to .env and update with your values
# NEVER commit .env files to version control

# ====================================
# CORE APPLICATION SETTINGS
# ====================================
PORT=3000
NODE_ENV=production
LOG_LEVEL=info

# ====================================
# SECURITY - REQUIRED
# ====================================
# Generate a secure random string (32+ characters)
# Use: openssl rand -base64 32
SESSION_SECRET=CHANGE_THIS_TO_RANDOM_32_CHAR_STRING

# Admin portal credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# Optional: Strict session store mode (no fallback to memory)
# SESSION_STORE_NO_FALLBACK=true

# ====================================
# DATABASE - REQUIRED
# ====================================
# PostgreSQL connection string
# Railway provides this automatically
DATABASE_URL=postgresql://user:password@host:port/database

# ====================================
# MICROSOFT 365 SSO - OPTIONAL
# ====================================
# Leave empty to use demo authentication mode
# Configure these for production SSO
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_TENANT_ID=
REDIRECT_URI=https://pa-approval.inspirationcap.com/api/auth/microsoft/callback
POST_LOGOUT_REDIRECT_URI=https://pa-approval.inspirationcap.com

# ====================================
# APPLICATION URLs
# ====================================
# Your deployed application URL
FRONTEND_URL=https://pa-approval.inspirationcap.com

# ====================================
# EXTERNAL APIS - OPTIONAL
# ====================================
# Yahoo Finance API (for stock validation)
# No key required for basic usage

# Exchange Rate API (for currency conversion)
# No key required for basic usage

# ====================================
# MONTHLY STATEMENT REQUESTS - OPTIONAL
# ====================================
# Requires Azure AD App Registration with application-level permissions:
#   Mail.Send, User.Read.All (or GroupMember.Read.All), Sites.ReadWrite.All
# Uses the same AZURE_CLIENT_ID, AZURE_CLIENT_SECRET, AZURE_TENANT_ID as SSO

# Email sender (must be a licensed mailbox in your tenant)
STATEMENT_SENDER_EMAIL=compliance@yourcompany.com

# SharePoint target site and folder
# Statements stored as: {FOLDER_PATH}/{employee}/{YYYY-MM}/filename
# Backups stored as: {BACKUP_FOLDER_PATH}/{YYYY-MM}/filename
SHAREPOINT_SITE_URL=yourcompany.sharepoint.com:/sites/Compliance
SHAREPOINT_LIBRARY_NAME=Documents
SHAREPOINT_FOLDER_PATH=Trading_Approval

# Schedule (cron format: sec min hour day month day-of-week)
# Default: 7th of every month at 9 AM HKT (allows time for month-end statements)
STATEMENT_REQUEST_SCHEDULE=0 0 9 7 * *

# Azure AD group to fetch employees from (optional, falls back to all enabled users)
AZURE_AD_EMPLOYEE_GROUP_ID=

# Days deadline for statement upload (from email send date)
STATEMENT_UPLOAD_DEADLINE_DAYS=14

# Set to "true" to disable the feature (disabled by default)
DISABLE_STATEMENT_REQUESTS=true

# ====================================
# DATABASE BACKUPS
# ====================================
# Cron schedule (sec min hour day month day-of-week)
# Default: every hour (0 0 * * * *)
# BACKUP_SCHEDULE=0 0 * * * *

# SharePoint folder for database backups (default: Database_Backups)
# Backups are organized into monthly subfolders: Database_Backups/YYYY-MM/
# SHAREPOINT_BACKUP_FOLDER_PATH=Trading_Approval/Database_Backups

# Set to "true" to disable automatic backups
# DISABLE_SCHEDULED_BACKUPS=false

# ====================================
# ANNOUNCEMENT EMAILS - ONE-TIME
# ====================================
# Send announcements to all employees via Graph API:
#   node scripts/send-announcement.js --dry-run    # Preview recipients
#   node scripts/send-announcement.js              # Send to all employees
# Requires: AZURE_CLIENT_ID, AZURE_CLIENT_SECRET, AZURE_TENANT_ID, STATEMENT_SENDER_EMAIL

# ====================================
# MONITORING - OPTIONAL
# ====================================
# Application Insights or similar APM
# MONITORING_KEY=
# MONITORING_ENDPOINT=